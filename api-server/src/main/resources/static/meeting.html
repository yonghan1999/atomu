<html lang="zh-CN" env="cn">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="format-detection" content="telephone=no">
    <title>Atomu 会议</title>
    <style>
        #input {position: absolute;top: 0;left: 0;opacity: 0;z-index: -10;}

        .doc-loading {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        width: 100%;
        height: 100%;
        text-align: center;
        z-index: 9999
    }

    .doc-loading .loading-mask {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: #fff;
        background-color: hsla(0, 0%, 100%, .9);
        transition: opacity .3s;
        z-index: 998
    }

    .doc-loading .loading-content {
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
        z-index: 999;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 45px
    }

    .doc-loading .loading-content .spinner {
        display: inline-block;
        z-index: 999
    }

    .doc-loading .loading-content .spinner:before {
        box-sizing: inherit;
        display: inline-block;
        width: 20px;
        height: 20px;
        content: " ";
        -webkit-animation: spinner-12 1.6s step-start infinite;
        animation: spinner-12 1.6s step-start infinite;
        vertical-align: middle;
        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAABg1BMVEUAAAC9vcGpqayzs7bNzdGYmJuVlZjKys6bm5/Jyc2cnJ+cnJ/Kys3Ly8+cnJ/R0dWfn6PJyczDw8fIyMzR0dXIyMzExMeioqXLy8+oqKzNzdGzs7a2trmdnaCUlJevr7LHx8uXl5q2trmenqGwsLO2trqxsbWhoaSXl5qxsbS1tbmwsLSjo6eUlJe4uLucnJ+VlZjIyMzDw8eysragoKOXl5qVlZjR0dXR0dW2trqioqbCwsbR0dWjo6a2trqZmZyzs7agoKPR0dWjo6bCwsbQ0NSvr7LJyc2cnKDFxcm8vL+ZmZzOztHMzNC+vsKXl5uZmZyjo6a9vcGYmJyurrGtrbHOztK3t7ucnJ+urrGjo6fHx8uxsbTDw8etrbCkpKe4uLzBwcWxsbSbm564uLvExMjR0dWYmJuUlJiioqbNzdHDw8e7u7+oqKvIyMy3t7q1tbmwsLOurrKdnaCcnJ+pqazCwsa9vcHJyc3OztLMzNCXl5qqqq2hoaW+vsK+vsHIyMsWRiyNAAAAZnRSTlMA5uYS5uaBExMQEAwLAQH4+Pf2wYODg4BfSSAMAcHBwKqpg4KBf19fXCL49/f39fX05ubm5ubm5cTEw8G+vru4q6uqhX9+fn19WUpKSUlJSSQhHh739efl5eTkxsS3qKinpoeEWSQqdCoWAAACIElEQVQ4y7XT91faUBTA8RumEBKRLaAisrR171m3VVut3Xs3JVDCtnQI/dN783g5jDzHL35/5HzOveddTkDfA5PpIdwkUyZjgiuy7e3ZQO1XJvO7+cvBgY0B1yRpSWiHgrumuBmwV5KkQDs8rClKHwNuI1x0tKBjGmGEAYPqSE8LetWBQWDkQdgb1GCwr6b88wIrxyLKbYDn5DwRHDjt6AD2wfHhR4AF1JHawdWB5G3fIq53zStZ0un0uIXHeyxJ0hrQ3IryRsA1Plc2m93VILaQEsHq8Vg1aPV6rSAEZpCdn+/S1WnSYA90ZXVniVulf5CYWiDS0g19hM0cCqDFW6aYEJnL1/n0J8NT9/SrV12fHsOtdTr/hzR/CoxOuHq93mg0uBMwf6eZWZD7SeOugz9oHBybqTtmwSOOuiO4rfDgk/qDGzcmPnYenP8yWalURrphPJ/PT0RDoCWmXiIrl3UwWiggffE1DCT7AGHlAf3q5QKhy0ZQu0/YXFKEHr8fMUWxmBHCiVlC402IzDnCA4grF/K6BodKxbe4MhQdQxqnq51b5ONKXsjyXYB+g6Ef4FmpWEwANro5tmHsfPocwg8AhlzVAPC+VCrOhoDVjjrwDCCXq/7FQU9x5GeWO3PKsrwDGoQYjrwzyoBb6F7zLRh6hSM3GVAdmIQWhIQ6kgHXZXlFbIdhvNAQA9r9fjtQWG3efH/fCJdGz3N99OC6/gMPF6RsShfrcQAAAABJRU5ErkJggg==);
        -webkit-background-size: 20px 20px;
        background-size: 20px 20px
    }

    .doc-loading .loading-content .loading-txt {
        font-size: 14px;
        padding-top: 5px
    }

    @keyframes spinner-12 {
        0% {
            -webkit-transform: rotate(0)
        }
        8.333333333333332% {
            -webkit-transform: rotate(30deg)
        }
        16.666666666666664% {
            -webkit-transform: rotate(60deg)
        }
        25% {
            -webkit-transform: rotate(90deg)
        }
        33.33333333333333% {
            -webkit-transform: rotate(120deg)
        }
        41.66666666666667% {
            -webkit-transform: rotate(150deg)
        }
        50% {
            -webkit-transform: rotate(180deg)
        }
        58.333333333333336% {
            -webkit-transform: rotate(210deg)
        }
        66.66666666666666% {
            -webkit-transform: rotate(240deg)
        }
        75% {
            -webkit-transform: rotate(270deg)
        }
        83.33333333333334% {
            -webkit-transform: rotate(300deg)
        }
        91.66666666666666% {
            -webkit-transform: rotate(330deg)
        }
    }</style>
    <link href="/css/atomu_meeting.css" rel="stylesheet">
</head>
<body class="in-pc">
<div style="background-color: #f8f9fb;display: block;" id="appCtrl" class="app support-webp-container"
     style="display: block;">
    <div id="detail-container" style="display:block">
        <div id="contentCtrl" class="content">
            <div class="header"><span class="welcome-to-tm-meeting">- 欢迎使用 Atomu 会议 -</span>
            </div>
            <div class="meeting-info-and-collect-to-my-meeting-container">
                <div class="periodical-meeting-tag" id="tm-periodical-meting-tag"></div>
                <div class="qrcode-join-entrance"></div>
                <div class="meeting-info-container fast-meeting" id="tm-meeting-info-container">
                    <div class="meeting-info" id="tm-meeting-info">
                        <div class="meeting-title-container">
                            <div class="meeting-title" id="tm-meeting-subject"
                                 >正在查询会议...
                            </div>
                            <span id="tm-custom-title"></span></div>
                        <div class="meeting-code-container">
                            <span class="meeting-code-locked-icon" id="tm-meeting-code-locked-icon" style="visibility: hidden;"></span>
                            <textarea id="input"></textarea>
                            <span class="meeting-code" id="addr"> 会议邀请码 </span>
                            <div id="tm-pmi-meeting-limit" class="pmi-meeting-limit" style="display: none;"><span
                                    class="pmi-meeting-limit-text">限量</span></div>
                            <div  class="copy-icon-container"><span
                                    class="meeting-code-copy-icon"></span></div>
                        </div>
                        <div class="meeting-time">
                            <div class="meeting-time-left-container"><span class="meeting-start-time"
                                                                           id="tm-meeting-start-time">00:00</span> <span
                                    class="meeting-start-date" id="tm-meeting-start-date">0000年00月00日</span></div>
                            <span class="short-gray-line line-left"></span>
                            <div class="meeting-duration-container">
                                <div class="meeting-duration-content"><span class="meeting-duration"
                                                                            id="tm-meeting-duration">999小时</span></div>
                            </div>
                            <span class="short-gray-line line-right"></span>
                            <div class="meeting-time-right-container"><span class="meeting-start-time"
                                                                            id="tm-meeting-end-time">00:00</span> <span
                                    class="meeting-start-date" id="tm-meeting-end-date">0000年00月00日</span></div>
                        </div>
                    </div>
                    <div class="for-hide-box-shadow-top"></div>
                    <div class="meeting-info-left-bottom meeting-info-quarter"></div>
                    <div class="meeting-info-right-bottom meeting-info-quarter"></div>
                </div>
                <div class="collect-to-my-meetings-container" id="tm-collect-to-my-meetings" style="display: none;">
                    <div class="for-hide-box-shadow-bottom"></div>
                    <div class="meeting-info-left-top meeting-info-quarter"></div>
                    <div class="meeting-info-right-top meeting-info-quarter"></div>
                    <div class="collect-to-my-meetings-content" id="tm-collect-to-my-meetings-content"
                         style="display: flex;"><span
                            class="calender-icon"></span>
                        <div class="collect-to-my-meetings">添加到我的会议</div>
                    </div>
                    <div class="already-collected-to-my-meetings-content"
                         id="tm-already-collected-to-my-meetings-content" style="display: none;">
                        <div class="already-collected-to-my-meetings">已添加到我的会议</div>
                    </div>
                </div>
            </div>
            <div id="mainButtons" class="we-btn" style="display: block; bottom: 75px;">
                <div id="btnWrapCtrl" class="btn-wrap" style="
    display: flex;
">
                    <button id="mpJoinBtnCtrl" onclick="copyAddr()"
                            class="main-button we-btn-wechat" style="display: block;color: #008CBA;">复制会议代码
                    </button>
                    <button id="joinBtnCtrl" onclick="join_meeting()" class="main-button confirm"
                            style="background-color: #008CBA;border: 1px solid #008CBA;">加入会议
                    </button>
                    <div class="has-password-tip" id="passwordTip" style="display: none;">会议已设置密码，请联系主持人获取</div>
                </div>
            </div>
            <div id="footCtrl" class="foot-wrap">
                <div class="foot-txt" id="footTxtCtrl">如果无法加入请<span class="copy-meeting-invitation-text" style="
    color: #008CBA;
" onclick="download_client()" ">下载客户端</span></div>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript" src="/js/jquery-3.5.1.min.js"></script>
<script>

    var href = new URL(location.href);
    var addr = href.pathname.substring(href.pathname.lastIndexOf('/') + 1);
    var subject = document.getElementById("tm-meeting-subject");
    var code = document.getElementById("addr");
    var start_time = document.getElementById("tm-meeting-start-time");
    var start_date = document.getElementById("tm-meeting-start-date");
    var end_time = document.getElementById("tm-meeting-end-time");
    var end_date = document.getElementById("tm-meeting-end-date");
    var duration = document.getElementById("tm-meeting-duration");
    $.ajax({
        url: "/search/" + addr,
        method: "get",
        contentType: "application/json;charset=utf-8",
        success: function (data) {
            if (data.code == 0) {
                let start = new Date(data.result.start);
                let end = new Date(data.result.end);
                let d = end.getTime() - start.getTime();
                let hours = Math.floor(d / (3600 * 1000));
                duration.innerText = hours + "小时";
                subject.innerText = data.result.name;
                code.innerText = data.result.code;
                start_time.innerText = start.getHours() + ":" + start.getMinutes();
                end_time.innerText = end.getHours() + ":" + end.getMinutes();
                start_date.innerText = start.getFullYear() + "年" + (start.getMonth() + 1) + "月" + start.getDate() + "日";
                end_date.innerText = end.getFullYear() + "年" + (end.getMonth() + 1) + "月" + end.getDate() + "日";

            } else if (data.code == 10) {
                console.log("no meeting")
            } else
                console.log("invalid input");
        },
        error: function () {
            pwdInfo.innerHTML = "注册失败,请重试!";
        }
    });

    function copyAddr() {
        var text = document.getElementById("addr").innerText;
        var input = document.getElementById("input");
        input.value = text; // 修改文本框的内容
        input.select(); // 选中文本
        document.execCommand("copy"); // 执行浏览器复制命令
        alert("复制成功");
    }
    function join_meeting() {
        alert("正在拼命开发中。。。");
    }
    function download_client() {
        alert("目前还没发布");
    }
</script>
</body>
</html>